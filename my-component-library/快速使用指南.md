# My Component Library - å¿«é€Ÿä½¿ç”¨æŒ‡å—

## ğŸ‰ é¡¹ç›®å·²åˆ›å»ºæˆåŠŸï¼

è¿™æ˜¯ä¸€ä¸ªå®Œæ•´çš„ Vue3 ç»„ä»¶åº“é¡¹ç›®ï¼ŒåŒ…å«ï¼š
- âœ… å¼€å‘ç¯å¢ƒé¢„è§ˆ
- âœ… VitePress æ–‡æ¡£ç«™ç‚¹
- âœ… ç»„ä»¶æ‰“åŒ…å‘å¸ƒé…ç½®

## ğŸ“¦ é¡¹ç›®ç»“æ„

```
my-component-library/
â”œâ”€â”€ packages/              # ç»„ä»¶æºç 
â”‚   â”œâ”€â”€ components/       # ä¸šåŠ¡ç»„ä»¶ï¼ˆMyButtonã€MyInputã€MyCardï¼‰
â”‚   â”œâ”€â”€ styles/           # æ ·å¼ç³»ç»Ÿï¼ˆSCSS å˜é‡ã€æ··å…¥ï¼‰
â”‚   â””â”€â”€ index.ts          # ç»„ä»¶åº“å…¥å£
â”œâ”€â”€ src/                  # å¼€å‘é¢„è§ˆ
â”‚   â”œâ”€â”€ App.vue           # é¢„è§ˆé¡µé¢
â”‚   â””â”€â”€ main.ts           # å…¥å£æ–‡ä»¶
â”œâ”€â”€ docs/                 # VitePress æ–‡æ¡£
â”‚   â”œâ”€â”€ .vitepress/       # VitePress é…ç½®
â”‚   â”œâ”€â”€ components/       # ç»„ä»¶æ–‡æ¡£
â”‚   â””â”€â”€ index.md          # é¦–é¡µ
â””â”€â”€ dist/                 # æ„å»ºäº§ç‰©ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
```

## ğŸš€ ä½¿ç”¨æ–¹å¼

### 1. å¯åŠ¨å¼€å‘ç¯å¢ƒï¼ˆé¢„è§ˆç»„ä»¶ï¼‰

```bash
cd my-component-library
npm run dev
```

è®¿é—® http://localhost:3000 æŸ¥çœ‹ç»„ä»¶å¼€å‘é¢„è§ˆ

### 2. å¯åŠ¨æ–‡æ¡£ç«™ç‚¹ï¼ˆæŸ¥çœ‹æ–‡æ¡£ï¼‰

```bash
npm run docs:dev
```

è®¿é—® http://localhost:5173 æŸ¥çœ‹ç¾è§‚çš„ VitePress æ–‡æ¡£ç«™ç‚¹

### 3. æ„å»ºç»„ä»¶åº“ï¼ˆæ‰“åŒ…å‘å¸ƒï¼‰

```bash
npm run build
```

äº§ç‰©åœ¨ `dist/` ç›®å½•ï¼ŒåŒ…å«ï¼š
- `dist/es/` - ES Module æ ¼å¼ï¼ˆæ”¯æŒæŒ‰éœ€å¼•å…¥ï¼‰
- `dist/umd/` - UMD æ ¼å¼ï¼ˆæµè§ˆå™¨ç›´æ¥ä½¿ç”¨ï¼‰
- `dist/es/index.d.ts` - TypeScript ç±»å‹å®šä¹‰
- å„ç»„ä»¶ç‹¬ç«‹çš„æ ·å¼æ–‡ä»¶

### 4. æ„å»ºæ–‡æ¡£ç«™ç‚¹

```bash
npm run docs:build
npm run docs:preview
```

## ğŸ› ï¸ æœ¬åœ°å¼€å‘è°ƒè¯•ï¼ˆnpm linkï¼‰

åœ¨æœ¬åœ°å¼€å‘æ—¶ï¼Œä½¿ç”¨ npm link å¯ä»¥è®© `ui-spec-site` é¡¹ç›®å®æ—¶ä½¿ç”¨æœ¬åœ°çš„ç»„ä»¶åº“ï¼Œå¹¶æ”¯æŒçƒ­æ›´æ–°ã€‚

### æ­¥éª¤ 1ï¼šåœ¨ç»„ä»¶åº“ä¸­åˆ›å»ºé“¾æ¥

```bash
# è¿›å…¥ç»„ä»¶åº“ç›®å½•
cd my-component-library

# åˆæ¬¡æ‰“åŒ…ï¼Œç”Ÿæˆ dist ç›®å½•
npm run build

# åˆ›å»ºå…¨å±€é“¾æ¥
npm link
```

### æ­¥éª¤ 2ï¼šåœ¨ ui-spec-site ä¸­ä½¿ç”¨é“¾æ¥

```bash
# è¿›å…¥ ui-spec-site ç›®å½•
cd ../ui-spec-site

# é“¾æ¥æœ¬åœ°çš„ç»„ä»¶åº“
npm link @demo/my-ui

# å¦‚æœè¿˜æ²¡æœ‰å®‰è£…ä¾èµ–ï¼Œå…ˆå®‰è£…
npm install
```

### æ­¥éª¤ 3ï¼šå¯åŠ¨å¼€å‘ç¯å¢ƒ

**éœ€è¦å¼€å¯ä¸¤ä¸ªç»ˆç«¯ï¼š**

**ç»ˆç«¯ 1 - ç»„ä»¶åº“ç›‘å¬æ¨¡å¼ï¼š**
```bash
cd my-component-library
npm run build:watch  # ç›‘å¬æ¨¡å¼ï¼Œæ–‡ä»¶å˜åŒ–åè‡ªåŠ¨é‡æ–°æ‰“åŒ…
```

**ç»ˆç«¯ 2 - ui-spec-site å¼€å‘æœåŠ¡ï¼š**
```bash
cd ui-spec-site
npm run dev  # å¯åŠ¨å¼€å‘æœåŠ¡å™¨
```

### æ­¥éª¤ 4ï¼šåœ¨ ui-spec-site ä¸­ä½¿ç”¨ç»„ä»¶

```typescript
// src/main.ts
import { createApp } from 'vue'
import MyUI from '@demo/my-ui'
import '@demo/my-ui/dist/es/styles/index.css'
import App from './App.vue'

const app = createApp(App)
app.use(MyUI)
app.mount('#app')
```

```vue
<!-- src/App.vue æˆ–å…¶ä»–ç»„ä»¶ -->
<template>
  <div>
    <MyButton type="primary">æµ‹è¯•æŒ‰é’®</MyButton>
    <MyInput v-model="text" placeholder="è¯·è¾“å…¥" />
    <MyCard header="æµ‹è¯•å¡ç‰‡">
      {{ text }}
    </MyCard>
  </div>
</template>

<script setup lang="ts">
import { ref } from 'vue'
const text = ref('Hello')
</script>
```

### çƒ­æ›´æ–°æµç¨‹

1. **ä¿®æ”¹ç»„ä»¶åº“ä»£ç **ï¼šåœ¨ `my-component-library/packages` ä¸­ä¿®æ”¹ç»„ä»¶
2. **è‡ªåŠ¨é‡æ–°æ‰“åŒ…**ï¼š`build:watch` ä¼šè‡ªåŠ¨æ£€æµ‹å˜åŒ–å¹¶é‡æ–°æ„å»º
3. **åˆ·æ–°é¡µé¢**ï¼šåœ¨ `ui-spec-site` ä¸­æ‰‹åŠ¨åˆ·æ–°æµè§ˆå™¨å³å¯çœ‹åˆ°æ›´æ–°

### è§£é™¤é“¾æ¥

å½“ä¸å†éœ€è¦æœ¬åœ°è°ƒè¯•æ—¶ï¼š

```bash
# åœ¨ ui-spec-site ä¸­è§£é™¤é“¾æ¥
cd ui-spec-site
npm unlink @demo/my-ui

# å¦‚æœéœ€è¦ï¼Œé‡æ–°å®‰è£…æ­£å¼ç‰ˆæœ¬
npm install @demo/my-ui

# åœ¨ç»„ä»¶åº“ä¸­ç§»é™¤å…¨å±€é“¾æ¥
cd ../my-component-library
npm unlink -g @demo/my-ui
```

### æ³¨æ„äº‹é¡¹

1. **é¦–æ¬¡ä½¿ç”¨å‰å¿…é¡»å…ˆ build**ï¼šç¡®ä¿ `dist` ç›®å½•å­˜åœ¨
2. **éœ€è¦ä¸¤ä¸ªç»ˆç«¯**ï¼šä¸€ä¸ªè¿è¡Œ `build:watch`ï¼Œä¸€ä¸ªè¿è¡Œ `dev`
3. **æ ·å¼æ›´æ–°**ï¼šä¿®æ”¹ SCSS æ ·å¼åï¼Œ`build:watch` ä¼šè‡ªåŠ¨é‡æ–°ç¼–è¯‘ CSS
4. **TypeScript ç±»å‹**ï¼šç±»å‹å®šä¹‰ä¹Ÿä¼šè‡ªåŠ¨æ›´æ–°
5. **åˆ·æ–°é¡µé¢**ï¼šç”±äºæ˜¯é“¾æ¥å¤–éƒ¨åŒ…ï¼ŒVite å¯èƒ½ä¸ä¼šè‡ªåŠ¨çƒ­æ›´æ–°ï¼Œéœ€è¦æ‰‹åŠ¨åˆ·æ–°æµè§ˆå™¨

### æ›¿ä»£æ–¹æ¡ˆï¼šVite åˆ«åé…ç½®

å¦‚æœä¸æƒ³ä½¿ç”¨ npm linkï¼Œä¹Ÿå¯ä»¥åœ¨ `ui-spec-site/vite.config.ts` ä¸­é…ç½®åˆ«åï¼š

```typescript
import { defineConfig } from 'vite'
import vue from '@vitejs/plugin-vue'
import { resolve } from 'path'

export default defineConfig({
  plugins: [vue()],
  resolve: {
    alias: {
      '@demo/my-ui': resolve(__dirname, '../my-component-library/packages'),
    },
  },
})
```

è¿™ç§æ–¹å¼ä¼šç›´æ¥ä½¿ç”¨æºç ï¼Œæ”¯æŒå®Œç¾çš„çƒ­æ›´æ–°ï¼Œä½†ä¸èƒ½æµ‹è¯•æ‰“åŒ…åçš„æ•ˆæœã€‚

## ğŸ“¦ å®‰è£…ä½¿ç”¨

### å®Œæ•´å¼•å…¥

```bash
npm install @demo/my-ui
```

```typescript
// main.ts
import { createApp } from 'vue'
import MyUI from '@demo/my-ui'
import '@demo/my-ui/dist/es/styles/index.css' // å¼•å…¥åŸºç¡€æ ·å¼
import App from './App.vue'

const app = createApp(App)
app.use(MyUI)
app.mount('#app')
```

### æŒ‰éœ€å¼•å…¥ï¼ˆæ¨èï¼‰

#### æ–¹å¼ä¸€ï¼šæ‰‹åŠ¨æŒ‰éœ€å¼•å…¥

```typescript
// åœ¨éœ€è¦çš„ç»„ä»¶ä¸­å¼•å…¥
import { MyButton, MyInput, MyCard } from '@demo/my-ui'

// å¼•å…¥å¯¹åº”ç»„ä»¶çš„æ ·å¼
import '@demo/my-ui/es/components/MyButton/src/MyButton.css'
import '@demo/my-ui/es/components/MyInput/src/MyInput.css'
import '@demo/my-ui/es/components/MyCard/src/MyCard.css'

// å¯é€‰ï¼šå¼•å…¥å…¨å±€æ ·å¼å˜é‡
import '@demo/my-ui/es/styles/index.css'
```

#### æ–¹å¼äºŒï¼šä½¿ç”¨ unplugin-vue-components è‡ªåŠ¨å¯¼å…¥

1. å®‰è£…æ’ä»¶ï¼š
```bash
npm install -D unplugin-vue-components
```

2. é…ç½® vite.config.tsï¼š
```typescript
import { defineConfig } from 'vite'
import vue from '@vitejs/plugin-vue'
import Components from 'unplugin-vue-components/vite'

export default defineConfig({
  plugins: [
    vue(),
    Components({
      resolvers: [
        // è‡ªå®šä¹‰è§£æå™¨
        (componentName) => {
          // å¦‚æœæ˜¯ My å¼€å¤´çš„ç»„ä»¶
          if (componentName.startsWith('My')) {
            return {
              name: componentName,
              from: '@demo/my-ui',
              sideEffects: [
                // è‡ªåŠ¨å¼•å…¥å¯¹åº”çš„æ ·å¼æ–‡ä»¶
                `@demo/my-ui/es/components/${componentName}/src/${componentName}.css`
              ]
            }
          }
        }
      ]
    })
  ]
})
```

3. ç›´æ¥åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨ï¼Œæ— éœ€æ‰‹åŠ¨å¯¼å…¥ï¼š
```vue
<template>
  <MyButton type="primary">æŒ‰é’®</MyButton>
  <MyInput v-model="value" />
  <MyCard header="å¡ç‰‡æ ‡é¢˜">å¡ç‰‡å†…å®¹</MyCard>
</template>

<script setup lang="ts">
import { ref } from 'vue'
// ç»„ä»¶å’Œæ ·å¼ä¼šè‡ªåŠ¨å¯¼å…¥ï¼Œæ— éœ€æ‰‹åŠ¨ import
const value = ref('')
</script>
```

### æ ·å¼æ–‡ä»¶è¯´æ˜

ç»„ä»¶åº“çš„æ ·å¼æ–‡ä»¶ç»“æ„ï¼š
```
dist/es/
â”œâ”€â”€ styles/
â”‚   â””â”€â”€ index.css              # å…¨å±€æ ·å¼å˜é‡ï¼ˆå¯é€‰å¼•å…¥ï¼‰
â””â”€â”€ components/
    â”œâ”€â”€ MyButton/
    â”‚   â””â”€â”€ src/
    â”‚       â””â”€â”€ MyButton.css   # æŒ‰é’®ç»„ä»¶æ ·å¼
    â”œâ”€â”€ MyInput/
    â”‚   â””â”€â”€ src/
    â”‚       â””â”€â”€ MyInput.css    # è¾“å…¥æ¡†ç»„ä»¶æ ·å¼
    â””â”€â”€ MyCard/
        â””â”€â”€ src/
            â””â”€â”€ MyCard.css     # å¡ç‰‡ç»„ä»¶æ ·å¼
```

**æŒ‰éœ€å¼•å…¥æ ·å¼çš„è§„åˆ™ï¼š**
- æ¯ä¸ªç»„ä»¶çš„æ ·å¼è·¯å¾„ï¼š`@demo/my-ui/es/components/{ç»„ä»¶å}/src/{ç»„ä»¶å}.css`
- å…¨å±€æ ·å¼ï¼ˆå¯é€‰ï¼‰ï¼š`@demo/my-ui/es/styles/index.css`

### æµè§ˆå™¨ç›´æ¥å¼•å…¥ï¼ˆUMD æ ¼å¼ï¼‰

UMD æ ¼å¼é€‚ç”¨äºç›´æ¥åœ¨æµè§ˆå™¨ä¸­é€šè¿‡ `<script>` æ ‡ç­¾å¼•å…¥ï¼Œæ— éœ€æ„å»ºå·¥å…·ã€‚

```html
<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>ä½¿ç”¨ç»„ä»¶åº“</title>
  
  <!-- 1. å¼•å…¥ Vue 3 -->
  <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
  
  <!-- 2. å¼•å…¥ Element Plusï¼ˆå› ä¸ºç»„ä»¶åº“ä¾èµ–å®ƒï¼‰ -->
  <link rel="stylesheet" href="https://unpkg.com/element-plus/dist/index.css">
  <script src="https://unpkg.com/element-plus"></script>
  
  <!-- 3. å¼•å…¥ç»„ä»¶åº“ UMD æ–‡ä»¶ -->
  <script src="https://unpkg.com/@demo/my-ui/dist/umd/index.js"></script>
  
  <!-- 4. å¼•å…¥ç»„ä»¶åº“æ ·å¼ï¼ˆä½¿ç”¨ ES ç‰ˆæœ¬çš„æ ·å¼ï¼‰ -->
  <link rel="stylesheet" href="https://unpkg.com/@demo/my-ui/dist/es/styles/index.css">
</head>
<body>
  <div id="app">
    <my-button type="primary" @click="handleClick">ç‚¹å‡»æˆ‘</my-button>
    <my-input v-model="message" placeholder="è¯·è¾“å…¥"></my-input>
    <my-card header="å¡ç‰‡æ ‡é¢˜">
      {{ message || 'å¡ç‰‡å†…å®¹' }}
    </my-card>
  </div>

  <script>
    const { createApp } = Vue
    
    // MyUILibrary æ˜¯å…¨å±€å˜é‡åï¼ŒåŒ…å«æ‰€æœ‰ç»„ä»¶
    console.log(MyUILibrary) // { MyButton, MyInput, MyCard, install }

    createApp({
      data() {
        return {
          message: ''
        }
      },
      methods: {
        handleClick() {
          alert('æŒ‰é’®è¢«ç‚¹å‡»ï¼')
        }
      }
    })
    .use(MyUILibrary) // å…¨å±€æ³¨å†Œæ‰€æœ‰ç»„ä»¶
    .mount('#app')
  </script>
</body>
</html>
```

**æ³¨æ„äº‹é¡¹ï¼š**
1. å¿…é¡¾å…ˆå¼•å…¥ Vue 3 å’Œ Element Plusï¼ˆç»„ä»¶åº“çš„ä¾èµ–ï¼‰
2. UMD æ–‡ä»¶ä¼šåœ¨å…¨å±€æš´éœ² `MyUILibrary` å˜é‡
3. å¯ä»¥é€šè¿‡ `app.use(MyUILibrary)` å…¨å±€æ³¨å†Œæ‰€æœ‰ç»„ä»¶
4. ä¹Ÿå¯ä»¥å•ç‹¬å¼•å…¥ç»„ä»¶ï¼š`const { MyButton } = MyUILibrary`

**æœ¬åœ°æ–‡ä»¶å¼•å…¥ç¤ºä¾‹ï¼š**
```html
<!-- å¦‚æœæ˜¯æœ¬åœ°æ–‡ä»¶ -->
<script src="./dist/umd/index.js"></script>
<link rel="stylesheet" href="./dist/es/styles/index.css">
<link rel="stylesheet" href="./dist/es/components/MyButton/src/MyButton.css">
<link rel="stylesheet" href="./dist/es/components/MyInput/src/MyInput.css">
<link rel="stylesheet" href="./dist/es/components/MyCard/src/MyCard.css">
```

## ğŸ“ å¼€å‘æ–°ç»„ä»¶

1. åœ¨ `packages/components/` åˆ›å»ºç»„ä»¶ç›®å½•
2. å‚è€ƒ MyButton çš„ç»“æ„åˆ›å»ºç»„ä»¶æ–‡ä»¶
3. åœ¨ `packages/components/index.ts` å¯¼å‡ºæ–°ç»„ä»¶
4. åœ¨ `docs/components/` åˆ›å»ºæ–‡æ¡£é¡µé¢
5. æ›´æ–° `docs/.vitepress/config.ts` æ·»åŠ ä¾§è¾¹æ 

## ğŸ“¤ å‘å¸ƒåˆ° npm

1. ä¿®æ”¹ `package.json` ä¸­çš„åŒ…åå’Œç‰ˆæœ¬å·
2. ç™»å½• npmï¼š`npm login`
3. å‘å¸ƒï¼š`npm publish --access public`

## ğŸ¨ å·²åˆ›å»ºçš„ç»„ä»¶

- **MyButton** - æŒ‰é’®ç»„ä»¶ï¼ˆæ”¯æŒç±»å‹ã€å°ºå¯¸ã€åŠ è½½ã€ç¦ç”¨ç­‰ï¼‰
- **MyInput** - è¾“å…¥æ¡†ç»„ä»¶ï¼ˆæ”¯æŒåŒå‘ç»‘å®šã€æ¸…ç©ºã€å¯†ç æ¡†ç­‰ï¼‰
- **MyCard** - å¡ç‰‡ç»„ä»¶ï¼ˆæ”¯æŒæ ‡é¢˜ã€é˜´å½±æ•ˆæœã€è‡ªå®šä¹‰æ’æ§½ï¼‰

## ğŸ’¡ æŠ€æœ¯æ ˆ

- Vite 5.x - æ„å»ºå·¥å…·
- Vue 3.4 - æ¡†æ¶
- TypeScript 5.x - ç±»å‹ç³»ç»Ÿ
- Element Plus 2.5 - åŸºç¡€ UI åº“
- SCSS - æ ·å¼é¢„å¤„ç†
- VitePress 1.x - æ–‡æ¡£ç«™ç‚¹

## ğŸ”— ç›¸å…³å‘½ä»¤

```bash
npm run dev              # å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run build            # æ„å»ºç»„ä»¶åº“
npm run preview          # é¢„è§ˆæ„å»ºäº§ç‰©
npm run docs:dev         # å¯åŠ¨æ–‡æ¡£å¼€å‘æœåŠ¡å™¨
npm run docs:build       # æ„å»ºæ–‡æ¡£ç«™ç‚¹
npm run docs:preview     # é¢„è§ˆæ–‡æ¡£ç«™ç‚¹
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1. TypeScript é”™è¯¯æ˜¯æ­£å¸¸çš„ï¼Œéœ€è¦å®‰è£…ä¾èµ–åæ‰ä¼šæ¶ˆå¤±
2. å¼€å‘ç¯å¢ƒå’Œæ–‡æ¡£ç«™ç‚¹ä½¿ç”¨ä¸åŒç«¯å£
3. ä¿®æ”¹ç»„ä»¶åéœ€è¦é‡æ–°æ„å»ºæ‰èƒ½åœ¨å…¶ä»–é¡¹ç›®ä¸­ä½¿ç”¨
4. å‘å¸ƒå‰è¯·ä¿®æ”¹ `package.json` ä¸­çš„åŒ…å

## ğŸ¯ ä¸‹ä¸€æ­¥

1. è¿è¡Œ `npm run dev` æŸ¥çœ‹å¼€å‘é¢„è§ˆ
2. è¿è¡Œ `npm run docs:dev` æŸ¥çœ‹æ–‡æ¡£ç«™ç‚¹
3. æ ¹æ®éœ€è¦ä¿®æ”¹å’Œæ·»åŠ ç»„ä»¶
4. æ„å»ºå¹¶å‘å¸ƒåˆ° npm

ç¥ä½ å¼€å‘æ„‰å¿«ï¼ğŸ‰
